<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>GamesWorld</title>
  <link rel="stylesheet" href="estilos.css">
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-BPBPQ9W7YR"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-BPBPQ9W7YR');
  </script>
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-database-compat.js"></script>
  <script>
    // ConfiguraciÃ³n de Firebase (REEMPLAZA CON TUS DATOS)
    const firebaseConfig = {
      apiKey: "AIzaSyDq4QyGKwXxTQqLhFkJKwXxTz1234567890", // Reemplaza con tu API Key
      authDomain: "gamesworld-chat.firebaseapp.com", // Reemplaza con tu dominio
      databaseURL: "https://gamesworld-chat-default-rtdb.firebaseio.com", // Reemplaza con tu URL de Realtime Database
      projectId: "gamesworld-chat", // Reemplaza con tu Project ID
      storageBucket: "gamesworld-chat.appspot.com", // Reemplaza con tu Storage Bucket
      messagingSenderId: "1234567890", // Reemplaza con tu Messaging Sender ID
      appId: "1:1234567890:web:abcdef1234567890" // Reemplaza con tu App ID
    };
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();
  </script>
</head>
<body>
  <header>
    <div class="logo">ðŸŽ® GamesWorld</div>
    <nav>
      <a href="#">Inicio</a>
      <a href="#">Juegos</a>
      <a href="#">Colecciones</a>
      <a href="#">CategorÃ­as</a>
    </nav>
  </header>
  <section class="seccion-juegos">
    <h2>Ãšltimos juegos</h2>
    <div class="contenedor-juegos">
      <!-- Los juegos se mantienen exactamente igual que en tu cÃ³digo original -->
      <!-- ðŸŽ® Juego 1 -->
      <div class="juego">
        <div class="etiqueta nuevo">Nuevo</div>
        <img src="https://i.pinimg.com/originals/f2/58/2c/f2582c76e2cc00e8a8042b69de541320.png" alt="Resident Evil 4 2005" onclick="mostrarDetalles('juego1')">
        <h3>Resident Evil 4 2005</h3>
        <div class="detalles-juego" id="juego1">
          <a href="https://cuty.io/Q3O5pqYBlL9" target="_blank" class="btn publicidad">Descargar (con publicidad)</a>
          <a href="https://www.mediafire.com/file/o5cjweku2asycdc/RE4_-_Production_Gamer.rar/file/" target="_blank" class="btn directo">Descargar directo</a>
          <div class="comentarios">
            <h4>Comentarios</h4>
            <div class="lista-comentarios" id="comentarios-juego1"></div>
            <form onsubmit="agregarComentario(event, 'juego1')">
              <input type="text" placeholder="Escribe tu comentario..." required>
              <button type="submit">Enviar</button>
            </form>
          </div>
        </div>
      </div>
      <!-- Resto de los juegos (del 2 al 23) -->
      <!-- MantÃ©n exactamente igual que en tu cÃ³digo original -->
    </div>
  </section>

  <!-- BotÃ³n flotante para abrir el chat -->
  <button onclick="toggleChat()" class="chat-float-button">ðŸ’¬</button>

  <!-- Ventana del chat -->
  <div class="chat-container">
    <div class="chat-header">
      <span>ðŸŽ® Chat en Vivo</span>
      <button onclick="toggleChat()">âœ•</button>
    </div>
    <div class="chat-messages" id="chatMessages"></div>
    <form class="chat-form" onsubmit="enviarMensaje(event)">
      <input type="text" id="mensajeInput" placeholder="Escribe tu mensaje..." required>
      <button type="submit">Enviar</button>
    </form>
  </div>

  <script>
    function mostrarDetalles(id) {
      const detalles = document.getElementById(id);
      detalles.style.display = detalles.style.display === 'block' ? 'none' : 'block';
    }
    function agregarComentario(event, juegoId) {
      event.preventDefault();
      const input = event.target.querySelector('input');
      const comentario = input.value.trim();
      if (comentario) {
        const lista = document.getElementById(`comentarios-${juegoId}`);
        const nuevoComentario = document.createElement('div');
        nuevoComentario.className = 'comentario';
        nuevoComentario.innerHTML = `<p><strong>Usuario:</strong> ${comentario}</p>`;
        lista.appendChild(nuevoComentario);
        input.value = '';
      }
    }
    // Evitar que el clic en el formulario cierre el menÃº
    document.querySelectorAll('.detalles-juego').forEach(detalle => {
      detalle.addEventListener('click', (e) => {
        e.stopPropagation();
      });
    });

    // Mostrar/ocultar chat
    function toggleChat() {
      const chat = document.querySelector('.chat-container');
      chat.style.display = chat.style.display === 'block' ? 'none' : 'block';
    }

    // Enviar mensaje
    function enviarMensaje(e) {
      e.preventDefault();
      const input = document.getElementById('mensajeInput');
      const mensaje = input.value.trim();
      if (mensaje) {
        const mensajesRef = database.ref('mensajes');
        mensajesRef.push({
          texto: mensaje,
          fecha: Date.now()
        });
        input.value = '';
      }
    }

    // Cargar mensajes
    function cargarMensajes() {
      const mensajesRef = database.ref('mensajes');
      const chatMessages = document.getElementById('chatMessages');

      mensajesRef.on('child_added', (snapshot) => {
        const mensaje = snapshot.val();
        const mensajeElement = document.createElement('div');
        mensajeElement.className = 'mensaje';
        mensajeElement.innerHTML = `<p><strong>Usuario:</strong> ${mensaje.texto}</p>`;
        chatMessages.appendChild(mensajeElement);
        chatMessages.scrollTop = chatMessages.scrollHeight;
      });

      // Borrar mensajes despuÃ©s de 24 horas
      setInterval(() => {
        const ahora = Date.now();
        mensajesRef.once('value', (snapshot) => {
          snapshot.forEach((childSnapshot) => {
            const mensaje = childSnapshot.val();
            if (ahora - mensaje.fecha > 24 * 60 * 60 * 1000) {
              childSnapshot.ref.remove();
            }
          });
        });
      }, 60 * 60 * 1000); // Revisar cada hora
    }

    // Iniciar chat al cargar la pÃ¡gina
    window.onload = () => {
      cargarMensajes();
    };
  </script>
</body>
</html>


